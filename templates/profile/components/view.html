<div id="profile-body" class="not_scrolling">
    <create-post-modal @closepostmodal="closePostModal" v-if="showCreatePostModal"></create-post-modal>
    {% if messages %}
        {% for message in messages %}
            <v-snackbar
            :value="true"
            {% if message.tags %} color="{{ message.tags }}"{% endif %}
            absolute
            right
            shaped
            bottom
            >
                {{message}}
            </v-snackbar>
        {% endfor %}
    {% endif %}
    <main id="profile-main">
        <div id="profile-upper" class="show-profile-upper">
            <div id="profile-banner-image">
            <img src="https://imagizer.imageshack.com/img921/9628/VIaL8H.jpg" alt="Banner image">
            </div>
            <div id="profile-d">
            <div class="animate-profile-pic" id="profile-pic">
                <img src="https://imagizer.imageshack.com/img921/3072/rqkhIb.jpg">
            </div>
            <div class="tb animate-info-tab" id="m-btns">
                <div class="td">
                    <div id="u-name">Himalaya Singh</div>
                </div>
                <div class="td">
                <div class="m-btn"><i class="material-icons">format_list_bulleted</i><span>Activity log</span></div>
                </div>
                <div class="td">
                <div class="m-btn"><i class="material-icons">lock</i><span>Privacy</span></div>
                </div>
                <div id="edit-profile"><i class="material-icons">camera_alt</i></div>
            </div>
            </div>
            <div id="black-grd"></div>
        </div>
        <div id="main-content">
            <div class="tb">
                <div class="td" id="l-col">
                    <div class="l-cnt">
                    <div class="cnt-label">
                        <i class="l-i" id="l-i-i"></i>
                        <span>Intro</span>
                        <div class="lb-action"><i class="material-icons">edit</i></div>
                    </div>
                    <div id="i-box">
                        <div id="intro-line">Front-end Engineer</div>
                        <div id="u-occ">I love making applications with Angular.</div>
                        <div id="u-loc"><i class="material-icons">location_on</i><a href="#">Bengaluru</a>, <a href="#">India</a></div>
                    </div>
                    </div>
                    <div class="l-cnt l-mrg">
                    <div class="cnt-label">
                        <i class="l-i" id="l-i-p"></i>
                        <span>Photos</span>
                        <div class="lb-action" id="b-i"><i class="material-icons">keyboard_arrow_down</i></div>
                    </div>
                    <div id="photos">
                        <div class="tb">
                        <div class="tr">
                            <div class="td"></div>
                            <div class="td"></div>
                            <div class="td"></div>
                        </div>
                        <div class="tr">
                            <div class="td"></div>
                            <div class="td"></div>
                            <div class="td"></div>
                        </div>
                        <div class="tr">
                            <div class="td"></div>
                            <div class="td"></div>
                            <div class="td"></div>
                        </div>
                        </div>
                    </div>
                    </div>
                    <div class="l-cnt l-mrg">
                    <div class="cnt-label">
                        <i class="l-i" id="l-i-k"></i>
                        <span>Did You Know<i id="k-nm">1</i></span>
                    </div>
                    <div>
                        <div class="q-ad-c">
                        <a href="#" class="q-ad">
                            <img src="https://imagizer.imageshack.com/img923/1849/4TnLy1.png">
                            <span>My favorite superhero is...</span>
                        </a>
                        </div>
                        <div class="q-ad-c">
                        <a href="#" class="q-ad" id="add_q">
                            <i class="material-icons">add</i>
                            <span>Add Answer</span>
                        </a>
                        </div>
                    </div>
                    </div>
                    <div id="t-box">
                    <a href="#">Privacy</a> <a href="#">Terms</a> <a href="#">Advertising</a> <a href="#">Ad Choices</a> <a href="#">Cookies</a> <span id="t-more">More<i class="material-icons">arrow_drop_down</i></span>
                    </div>
                </div>
                <div class="td" id="m-col">
                    <div class="m-mrg animate-tab" id="p-tabs">
                        <div class="tb">
                            <div class="td">
                            <div class="tb" id="p-tabs-m">
                                <div class="td active"><i class="material-icons">av_timer</i></div>
                                <div class="td"><i class="material-icons">people</i></div>
                                <div class="td"><i class="material-icons">photo</i></div>
                                <div class="td"><i class="material-icons">explore</i></div>
                                <div class="td"><i class="material-icons">archive</i></div>
                            </div>
                            </div>
                            <div class="td" id="p-tab-m"><i class="material-icons">keyboard_arrow_down</i></div>
                        </div>
                    </div>
                    <div class="m-mrg" id="composer">
                        <div id="c-tabs-cvr">
                            <div class="tb" id="c-tabs">
                            <div class="td active"><i class="material-icons">subject</i><span>Make Post</span></div>
                            <div class="td"><i class="material-icons">camera_enhance</i><span>Photo/Video</span></div>
                            <div class="td"><i class="material-icons">videocam</i><span>Live Video</span></div>
                            <div class="td"><i class="material-icons">event</i><span>Life Event</span></div>
                            </div>
                        </div>
                        <div id="c-c-main">
                            <div class="tb">
                            <div class="td" id="p-c-i"><img src="https://imagizer.imageshack.com/img921/3072/rqkhIb.jpg" alt="Profile pic"></div>
                            <div class="td post-modal-trigger" id="c-inp">
                                <input disabled type="text" placeholder="What's on your mind?">
                            </div>
                            </div>
                            <div id="insert_emoji"><i class="material-icons">insert_emoticon</i></div>
                        </div>
                    </div>
                    {% for post in user.post.all %}
                        <div>
                            <div class="post">
                                {% if post.post_type == 'text' %}
                                    {% include './post-type/text-post.html' %}
                                {% endif %}
                                <div>
                                    <div class="p-acts">
                                        <div class="p-act like">
                                            <form class="forms_form" action="{% url 'likePost' %}"  method="POST">
                                                {% csrf_token %}
                                                <input hidden name="post_id" value="{{post.id}}"/>
                                                <button type="submit" class="flex-fix">
                                                    <i class="material-icons">thumb_up_alt</i>
                                                    <span>{{post.likes.all.count}}</span>
                                                </button>
                                            </form>
                                        </div>
                                        <div class="p-act comment" @click="toggleComments({{post.id}})">
                                            <i class="material-icons">comment</i>
                                            <span>{{post.comments.all.count}}</span>
                                        </div>
                                            <div
                                                v-if="avatarsStackedLimited && avatarsStackedLimited.length > 0"
                                                width="320"
                                            >
                                                <section class="avatars-group pa-3 stacked">
                                                     <div v-for="avatar in avatarsStackedLimited" :key="`avatar-id-${avatar.id}`" class="avatars-group__item">
                                                     <v-tooltip bottom>
                                                        <template v-slot:activator="{ on, attrs }">
                                                            <span
                                                                v-bind="attrs"
                                                                v-on="on"
                                                            >
                                                                <profile-avatar 
                                                                    :avatar="avatar" slot="activator"
                                                                >
                                                                    <profile-presence v-if="presence" :presence="avatar.presence"></profile-presence>
                                                                </profile-avatar>
                                                            </span>
                                                        </template>
                                                        <profile-tooltip :avatar="avatar" :presence="presence"></profile-tooltip>
                                                    </v-tooltip>
                                                    </div>
                                                    <div class="avatars-group__item more">
                                                        <v-avatar color="primary" size="40px">
                                                            <v-menu
                                                                v-model="stackedMenu"
                                                                left
                                                                :max-height="menuMaxHeight"
                                                                nudge-bottom="8"
                                                                offset-y
                                                            >
                                                                <template v-slot:activator="{ on }">
                                                                    <v-btn icon v-on="on">
                                                                        <v-icon :color="$vuetify.theme.dark ? 'grey darken-2' : 'white'">more_horiz</v-icon>
                                                                    </v-btn>
                                                                </template>
                                                                <v-list dense two-line>
                                                                <v-list-tile
                                                                    v-for="avatar in avatarsSorted"
                                                                    :key="`avatar-menu-id-${avatar.id}`"
                                                                    avatar
                                                                >
                                                                    <v-list-tile-avatar>
                                                                    <profile-avatar :avatar="avatar" custom-class="bordered small" size="32px">
                                                                        <profile-presence v-if="presence" :presence="avatar.presence"></profile-presence>
                                                                    </profile-avatar>
                                                                    </v-list-tile-avatar>
                                                                    <v-list-tile-content>
                                                                    <v-list-tile-title>{{ avatar.alt }}</v-list-tile-title>
                                                                    <v-list-tile-sub-title>{{ avatar.role }}</v-list-tile-sub-title>
                                                                    </v-list-tile-content>
                                                                </v-list-tile>
                                                                </v-list>
                                                            </v-menu>
                                                        </v-avatar>
                                                    </div>
                                                </section>
                                            </div>
                                        <div class="p-act share"><i class="material-icons">reply</i></div>
                                    </div>
                                </div>
                                <v-scale-transition>
                                    <div v-show="expandComment == {{post.id}}">
                                        <form class="forms_form" action="{% url 'makeComments' %}"  method="POST">
                                            {% csrf_token %}
                                            <input hidden name="post_id" value="{{post.id}}"/>
                                            <div class="content-items">
                                                {% for field in commentForm %}
                                                    <div class="fieldWrapper post-comment flex-fix mt-6">
                                                        {{ field }}
                                                        <v-btn type="submit">comment</v-btn>
                                                        <span class="focus-border focus-border-fix"></span>
                                                        {{ field.errors }}
                                                    </div>
                                                {% endfor %}
                                            </div>
                                        </form>
                                        {% include './comments.html' %}
                                    </div>
                                </v-scale-transition>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </main>
</div>